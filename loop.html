<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
	html{
		font-size: 312.5%
	}
	#outerDiv{
		position: relative;
		width:8rem;
		height:4rem;
		overflow: hidden;
	}
	#loopDiv{
		position: relative;
	/* 	left:-8rem; */
		width:700%;
		height: 100%
	}
	#loopDiv a{
		float:left;
	}
	#loopDiv img{
		width:8rem;
		height:4rem;
	}

	</style>
</head>
<body>
	<div id="outerDiv">
		<div id="loopDiv">
			<a href="#" class="imgZone"><img src="imgs/1.jpg" alt=""></a>
			<a href="#" class="imgZone"><img src="imgs/2.jpg" alt=""></a>
			<a href="#" class="imgZone"><img src="imgs/3.jpg" alt=""></a>
		</div>
	</div>

<script src="zepto/src/zepto.js"></script>
<script src="zepto/src/event.js"></script>
<script src="zepto/src/touch.js"></script>
	<script>
	window.onload = init;
	var i = 0;
	var ele = document.getElementById("loopDiv");
	var busy = false;
	var loopTimer = null;
	function init(){
		initLoop();
		bindEvt();
	}

/*	var LoopImgs = {
	
		init: function (domSelector,config){
			this.dom = $(domSelector);
			this.index = 0;
			this.busy = false;
			this.initLoop();
		},
		initLoop : function (){
			var loop = function (){
			setTimeout(function (){
				i++;
				if(i>=3 || i<=0) {
					i=0;
				}
				gotoIndex(i);
				loop();
			},3000);
			}
			loop();
		},
		bindEvt: function (){
			$("#loopDiv").on("swipeLeft",function (){
			//touchFlag = false;
			i++;  //alert(i);
			if(i>=3) { 
			i=2;
				return;
			}
			gotoIndex(i);
			//touchFlag = true;
		
	   	});
		$("#loopDiv").on("swipeRight",function (){
		//touchFlag = true;
			i--;// alert(i);
			if(i<0) { 
			i=0;
				return;
			}
			gotoIndex(i);
			//touchFlag = false;
		});
		},
		gotoIndex: function (i){
			if(self.busy)return;
	    	  clearTimeout(self.timer);
	    	  self.busy = true;
			  var offsetx = -i;
			ele.style.transition = "transform 0.3s ";
			ele.style.transform = "translate("+offsetx*8+"rem,0)";
			ele.style.webkitTransform = "translate("+offsetx*8+"rem,0)";
		}

	}*/




	function initLoop(){
		/*var loop = function (){
			loopTimer = setTimeout(function (){
				i++;
				if(i>=3 || i<=0) {
					i=0;
				}
				gotoIndex(i);
				loop();
			},3000);
		}*/
		loop();
	}
	function loop(){
		loopTimer = setTimeout(function (){
			i++;  console.log("自动",i);
			if(i>=3 || i<=0) {
				i=0;
			}
			gotoIndex(i);
		},3000);
	}
	function bindEvt(){
		$("#loopDiv").on("swipeLeft",function (){
			clearTimeout(loopTimer);
			i++;       console.log("左",i);
			if(i>=3) { 
			i=2;
				return;
			}
			gotoIndex(i);
			//touchFlag = true;
		
	   });
	$("#loopDiv").on("swipeRight",function (){
		clearTimeout(loopTimer);
			i--;       console.log("右",i);
			if(i<0) { 
			i=0;
				return;
			}
			gotoIndex(i);
			//touchFlag = false;
	});
}
  

  function gotoIndex(i){ console.log('定位至',i);
  	var offsetx = -i;
	ele.style.transition = "transform 0.3s ";
	ele.style.transform = "translate("+offsetx*8+"rem,0)";
	ele.style.webkitTransform = "translate("+offsetx*8+"rem,0)";
	loop();
  }


	</script>
</body>
</html>